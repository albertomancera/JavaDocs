package mobiliario;

import java.util.Arrays;

public abstract class Almacenaje extends Mueble implements Personalizable{
	//Atributos de clase constante
		public final static int MIN_MODULOS = 1;
		public final static int MAX_MODULOS = 20;
		
		//Atributos de objeto
		protected double anchura;
		protected double altura;
		private int numMaxModulos;
		protected Modulo[] array;
		protected int modulosAnadidos = 0;
		
		public Almacenaje(double precio, String descripcion, double anchura, double altura, int numMaxModulos) throws IllegalArgumentException {
			super(precio, descripcion);
			if(numMaxModulos < MIN_MODULOS || numMaxModulos > MAX_MODULOS) {
				throw new IllegalArgumentException("Error: No se puede crear el mueble de Almacenaje. El número de módulos no esta en el rango permitido: " + numMaxModulos);
			}
			
			this.anchura = anchura;
			this.altura = altura;
			this.numMaxModulos = numMaxModulos;
			this.array = new Modulo[numMaxModulos];
			array[modulosAnadidos] = Modulo.BALDA;
			modulosAnadidos++;
		}

		public double getAnchura() {
			return anchura;
		}

		public double getAltura() {
			return altura;
		}

		public int getNumMaxModulos() {
			return numMaxModulos;
		}

		public int getModulosAnadidos() {
			return modulosAnadidos;
		}

		@Override
		public String obtenerModulos() {
			return Arrays.toString(array);
		}

		@Override
		public void anyadirModulo(Modulo modulo) throws IllegalStateException, NullPointerException {
			modulosAnadidos++;
			if (modulo==null) {
				modulosAnadidos--;
				throw new NullPointerException("Error: el módulo a añadir no puede ser nulo");
			} if (modulosAnadidos>numMaxModulos) {
				modulosAnadidos--;
				throw new IllegalStateException("Error: no se puede añadir el modulo "+modulo+". El número de módulos no puede superar el máximo permitido: "+numMaxModulos);
			}
			
		}

		@Override
		public Modulo extraerModulo() throws IllegalStateException {
			// TODO Auto-generated method stub
			return null;
		}
		
		@Override
		public String toString() {
			return super.toString() +  " Anchura: " + anchura + ", Altura:" + altura + ", numMaxModulos=" + numMaxModulos
					+ ", array=" + Arrays.toString(array); 
		}

}
