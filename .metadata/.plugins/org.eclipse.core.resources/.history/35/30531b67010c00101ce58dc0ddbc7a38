package operArrayList;

import java.io.File;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;
import java.util.Scanner;


public class PrincipalArrayList {

	public static void main(String[] args) {
		ArrayList<Estudiante> lista;
		File f = new File("notas1.txt");
		System.out.println("Importa la información contenida en el documento notas1.txt");
		System.out.println("--------------------------------------------");
		lista = importarDatos(f);
		
		System.out.println("2. Muestra el número de registros que contiene.");
		System.out.println("-----------------------------------------");
		System.out.println("Número de registros: "+ lista.size());
		
		System.out.println("3. Ordena los registros por grupo y nombre.");
		System.out.println("-----------------------------------------");
		Collections.sort(lista, Comparator.comparing(Estudiante::getGrupo)
	            .thenComparing(Estudiante::getNombre));
		
		System.out.println("4. Inserta siguiente registro:");
		System.out.println("-----------------------------------------");
		Estudiante est1 = new Estudiante("1º ESO D","López Muro, Rosario",3,3,4,4,3);
		lista.add(est1);
		System.out.println("Número de registros: "+ lista.size());
		
		System.out.println("5. Inserta siguiente registro en mitad de la lista:");
		System.out.println("-----------------------------------------");
		Estudiante est2 = new Estudiante("1º ESO B","Duarte Durán, Alba", 2,3,4,1,3);
		lista.add(lista.size()/2, est2);
		
		System.out.println("6. Posición del nuevo registro: "+ lista.indexOf(est2));
		
		System.out.println("7. Importa los registros del documento notas2.txt a un ArraList auxiliar e incluye los elementos\r\n"
				+ "de este ArrayList auxiliar al primer ArrayList.");
		ArrayList<Estudiante>lista2;
		File f1 = new File("notas2.txt");
		System.out.println("Total registros antes de añadir: "+ lista.size());
		lista2 = importarDatos(f1);
		System.out.println("Total registros de la lista auxiliar: "+ lista2.size());
		lista.addAll(lista2);
		System.out.println("Total registros después de añadir: "+ lista.size());
		
		System.out.println("8. Busca el registro con el nombre “Cordero Benítez, Alejandro” y muestra toda su información");
		System.out.println("-----------------------------------------");
		System.out.println(buscarNombre("Cordero Benítez, Alejandro", lista));
		
		
		System.out.println("9. Busca el registro con el nombre “Fernández Villalón, Carlos” y muestra toda su información");
		System.out.println("-----------------------------------------");
		System.out.println(buscarNombre("Fernández Villalón, Carlos", lista));
		
		System.out.println("10. Borra el registro que está en la posición mitad más 1 e imprime toda su información...");
		System.out.println("-----------------------------------------");
		System.out.println("Posición mitad + 1: "+(lista.size()/2)+1);
		System.out.println("Registro en la posición 74" + lista.get(74));
		
		lista.remove((lista.size()/2)+1);
		System.out.println("Borramos registro ...");
		System.out.println("Nuevo registro en la posicion 74 :"+ lista.get(74));

		System.out.println("11. Borramos los primeros 10 registros");
		System.out.println("-----------------------------------------");
		System.out.println("Total registros: "+ lista.size());
		if(lista.size() >=10) {
			for(int i =0; i<10; i++) {
				lista.remove(0);
			}
		}
		System.out.println("Total registros después de borrar: "+ lista.size());
		
		
		System.out.println("12. Borra todos los registros que tengan en matemáticas un 2. Indica cuántos registros borras");
		
		System.out.println("Se han borrado :"+ borrarRegistrosMatematicas2(lista));
	}

	private static ArrayList<Estudiante> importarDatos(File f) {
		ArrayList<Estudiante> e1 = new ArrayList<>();
		
		try {
			Scanner lector = new Scanner(f);
		
			while(lector.hasNext()) {
				String linea = lector.nextLine();
				String [] partes = linea.split(";");
				String grupo = partes[0];
				String nombre = partes[1];
				int matematicas = Integer.parseInt(partes[2]);
				int lengua = Integer.parseInt(partes[3]);
				int fisica = Integer.parseInt(partes[4]);
				int quimica = Integer.parseInt(partes[5]);
				int ingles = Integer.parseInt(partes[6]);
				
				Estudiante estudiante = new Estudiante(grupo,nombre,matematicas,lengua,fisica,quimica,ingles);
				e1.add(estudiante);
			}
			lector.close();
		}catch(Exception e) {
			System.out.println(e.getMessage());
		}
		return e1;
	}
	
	private static String buscarNombre(String nombre, ArrayList<Estudiante> lista){
		String informacion = "Registro no encontrado";
		for (Estudiante estudiante : lista) {
			if(estudiante.getNombre().equalsIgnoreCase(nombre)) {
				informacion = estudiante.toString();
			}
		}
		return informacion;
	}
	
	private static void borrarRegistrosMatematicas2 (ArrayList<Estudiante> lista) {
		int contador = 0;
		Iterator<Estudiante> iterador = lista.iterator();
		
		while (iterador.hasNext()) {
			if (iterador.next().getMatematicas() == 2) {
				iterador.remove();
				contador ++;
			}
		}
	}
	
}
